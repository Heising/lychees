<p align="center">
  <a href="https://redli.cn" target="_blank" rel="noopener noreferrer">
    <img width="360" src="lychees-web\public\lychees.svg" alt="Pinia logo">
  </a>
</p>

## è¿™æ˜¯ä¸€ä¸ªæ”¯æŒå¯¼å…¥ç¬¬ä¸‰æ–¹ svg çš„ä¹¦ç­¾é¡µå…¨æ ˆé¡¹ç›®
å‰ç«¯vueï¼ˆä¸»é¡µé¢ï¼‰reactï¼ˆè´¦å·ç®¡ç†ï¼‰+golang

é‡Œé¢æœ‰ä¸€ç§æ–¹æ¡ˆè§£å†³jwtæ— çŠ¶æ€é—®é¢˜ï¼ŒåŒæ—¶ä¿æŒ jwt å¤šæœåŠ¡å™¨é€šè¡Œï¼Œæ¯”å¦‚è§£å†³å¤šè®¾å¤‡ä¸‹çº¿é—®é¢˜

å¤šç§å¹¶å‘ map åŠ é” play ğŸ” ç¤ºä¾‹

Redisï¼ŒMongoDBï¼Œpgsqlç¤ºä¾‹

ä¸€ä¸ªæˆç†Ÿçš„æµè§ˆå™¨åº”è¯¥è‡ªå·±åŠ¨ï¼Œä¼šè‡ªå·±åˆ¤æ–­æœ‰æ²¡æœ‰jwtè¿‡æœŸï¼Œåˆ«ç­‰401å†è¯·æ±‚åˆ·æ–°ï¼Œæµªè´¹æœåŠ¡å™¨èµ„æº

<img src="assets\wallpaper-1717944582372.jpg" alt="wallpaper-1717944582372" style="width:50%;" /><img src="assets\wallpaper-1717945222743.jpg" alt="wallpaper-1717945222743" style="width:50%;" />
<img src="assets\wallpaper-1718013538829.jpg" alt="wallpaper-1718013538829" style="width:50%;" /><img src="assets\wallpaper-1718013611445.jpg" alt="wallpaper-1718013611445" style="width:50%;" />
<img src="assets\191938.jpg" alt="191938" />



é€šè¿‡ svg çš„å¯ä»¥é¼ æ ‡æ‚¬åœåˆ‡æ¢logoä¸­é—´çš„ç™½è‰²å˜ä¸ºé»‘è‰² ä¸ªæ€§åŒ–ä½ çš„æ ‡ç­¾é¡µ

<img src="assets\b9beae3986bf781abe93c5c78e6a3516.png" alt="b9beae3986bf781abe93c5c78e6a3516" /><img src="assets\å±å¹•æˆªå›¾ 2024-06-09 223537.png" alt="å±å¹•æˆªå›¾ 2024-06-09 223537" />



å•è‰² svgï¼Œç›´æ¥å¯ä»¥ä½¿ç”¨é˜¿é‡Œå­—åº“ç§»é™¤é¢œè‰²

å¤šè‰² svgï¼ŒæŠŠéœ€è¦æ§åˆ¶å˜è‰²çš„è·¯å¾„ç§»é™¤ fill å±æ€§ é€šè¿‡ css æ§åˆ¶å˜è‰²

#### ç¤ºä¾‹ svg ä»£ç 

```xml
<svg t="1717943897408" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1872"
    width="200" height="200">
    <path
        d="M732.884976 369.62096a399.444957 399.444957 0 0 0 233.642975 75.093992v-168.319982c-16.511998 0-32.938996-1.707-49.066995-5.162999v132.436986a399.487957 399.487957 0 0 1-233.684974-75.049992V671.999928c0 171.775982-138.751985 310.996967-309.887967 310.996966a307.626967 307.626967 0 0 1-172.500982-52.607994A308.394967 308.394967 0 0 0 422.95501 1023.99989c171.135982 0 309.929967-139.220985 309.929966-311.039967V369.66396z m60.501994-169.727981a234.879975 234.879975 0 0 1-60.501994-137.300986V40.959996H686.379981a235.562975 235.562975 0 0 0 107.007989 158.932983zM309.632022 798.634914a141.994985 141.994985 0 0 1-28.927997-86.143991 141.994985 141.994985 0 0 1 184.74698-135.594985v-171.989981a311.509967 311.509967 0 0 0-49.023995-2.858v133.887985A141.994985 141.994985 0 0 0 231.68003 671.530928c0 55.551994 31.700997 103.679989 77.951992 127.103986z"
        fill="#FF004F" p-id="1873"></path>
    <path
        d="M683.775982 328.660965a399.529957 399.529957 0 0 0 233.684974 75.050992V271.274971a234.367975 234.367975 0 0 1-124.073986-71.381992A235.604975 235.604975 0 0 1 686.378981 40.959996H564.223994v671.999927a142.036985 142.036985 0 0 1-141.738984 141.823985 141.396985 141.396985 0 0 1-112.852988-56.149994 142.292985 142.292985 0 0 1-77.994992-127.102986 141.994985 141.994985 0 0 1 184.74698-135.594986V402.047957c-168.106982 3.499-303.359967 141.354985-303.359967 310.954966 0 84.649991 33.706996 161.364983 88.36299 217.428977a307.626967 307.626967 0 0 0 172.500982 52.607994c171.178982 0 309.887967-139.263985 309.887967-311.039966V328.703965z"
        p-id="1874"></path>
    <!-- æ§åˆ¶å˜è‰²çš„è·¯å¾„ä¸è¦ç»™fillå±æ€§ é€šè¿‡cssæ§åˆ¶å˜è‰²-->
    <path
        d="M917.460956 271.274971v-35.839996a232.959975 232.959975 0 0 1-124.073986-35.541996 234.111975 234.111975 0 0 0 124.073986 71.381992zM686.379981 40.959996a239.402974 239.402974 0 0 1-2.559999-19.327998V0H515.157v671.999928A141.994985 141.994985 0 0 1 373.420015 813.823913a140.756985 140.756985 0 0 1-63.786993-15.189999 141.396985 141.396985 0 0 0 112.852988 56.149994 142.036985 142.036985 0 0 0 141.738984-141.780985V40.959996h122.154987zM416.42701 402.047957v-38.100996a311.807967 311.807967 0 0 0-42.495995-2.902C202.752033 361.044961 64.000048 500.266946 64.000048 672.042928a310.996967 310.996967 0 0 0 137.386985 258.388972 310.527967 310.527967 0 0 1-88.31999-217.429977c0-169.556982 135.252985-307.454967 303.359967-310.953966z"
        fill="#00F2EA" p-id="1875"></path>
</svg>
```

### å¯¼å…¥ symbol å¼•ç”¨

åº”è¯¥è¯´è¿™æ‰æ˜¯æœªæ¥çš„ä¸»æµå¼•ç”¨svgæ–¹å¼ï¼Œ[æŸ¥çœ‹æ–‡ç« ](https://www.iconfont.cn/help/detail?spm=a313x.help_detail.i1.d8d11a391.550b3a81IFTvPQ&helptype=code) è¿™ç§ç”¨æ³•å…¶å®æ˜¯åšäº†ä¸€ä¸ªsvgçš„é›†åˆ



# ä½¿ç”¨å“ªä¸ªç¬¬ä¸‰æ–¹å‘¢ï¼Ÿ

#### å¯ä»¥ä½¿ç”¨iconfont-é˜¿é‡Œå·´å·´çŸ¢é‡å›¾æ ‡åº“ https://www.iconfont.cn/

#### æœç´¢æˆ–è€…ä¸Šä¼ å›¾æ ‡åˆ°é˜¿é‡Œå·´å·´çŸ¢é‡å›¾æ ‡åº“

#### æ·»åŠ ä½ éœ€è¦çš„å›¾æ ‡åˆ°é¡¹ç›®

#### æ‹·è´é¡¹ç›®ä¸‹é¢ç”Ÿæˆçš„symbolå¯¼å…¥é“¾æ¥ï¼š

```js
//at.alicdn.com/t/font_********.js
```





# åç«¯é¡¹ç›®

## lychees-server 

éœ€è¦å®‰è£…Goè¯­è¨€ç¼–è¯‘ linuxå®‰è£…æ•™ç¨‹

```shell
wget https://go.dev/dl/go1.22.2.linux-amd64.tar.gz
#å…ˆç§»é™¤æ—§çš„goå®‰è£…åŒ…ï¼Œå†è§£å‹åˆ°/usr/local/go
rm -rf /usr/local/go && tar -C /usr/local -xzf go1.22.2.linux-amd64.tar.gz
```

å‘½ä»¤æ¥å®‰è£… Go è¯­è¨€ã€‚å¦‚æœæ‚¨å·²ç»å®‰è£…äº† Go è¯­è¨€ï¼Œè¯·ç¡®ä¿ $GOPATH å’Œ $GOROOT ç¯å¢ƒå˜é‡å·²æ­£ç¡®è®¾ç½®ã€‚

è®¾ç½®ç¯å¢ƒå˜é‡

```shell
export PATH=$PATH:/usr/local/go/bin
```

ä¸»è¦ä¸º[gin](https://gin-gonic.com/) + [gorm](https://gorm.io/) è¯·ç‚¹å‡»æŸ¥é˜…ç›¸å…³æ–‡æ¡£

tokenå­˜å‚¨éœ€è¦ [protobuff](https://protobuf.dev/)  è¯·åˆ° proto æ–‡ä»¶å¤¹æ‰§è¡Œå‘½ä»¤ `protoc --go_out=./ auth.proto`

é‚®ç®±ç”¨åˆ° [templ](https://templ.guide/) HTMLé¡µé¢è¯·åˆ° utils æ–‡ä»¶å¤¹æ‰§è¡Œå‘½ä»¤ `templ generate`



#### ç¼–è¯‘ç¨‹åºï¼Œè¯·åœ¨ linux ç¯å¢ƒä¸‹ç¼–è¯‘

ç¼–è¯‘éœ€è¦å®‰è£… cbrotli å¦‚æœä¸æ¸…æ¥š cbrotli æ˜¯ä»€ä¹ˆï¼Œè¯·åˆ°utils /website_info.go æ³¨é‡Šæ‰ br è§£ç ç›¸å…³ä»£ç 

lychees-serveræ–‡ä»¶å¤¹æ‰§è¡Œå‘½ä»¤go build`ç¼–è¯‘



#### Prometheus

åªç»Ÿè®¡qpsï¼Œä¸éœ€è¦ Prometheus è¯·åˆ° middlewares æ–‡ä»¶å¤¹ä¸‹ prometheus.go æ³¨é‡Šä»£ç 



#### æ¨èä½¿ç”¨ä»£ç† nginx æˆ–è€… openresty 

ç¤ºä¾‹

```nginx
server {
    # IPé™æµ
    limit_req_zone $binary_remote_addr zone=ip_limit_api:10m rate=5r/s;
    limit_req zone=ip_limit_api burst=100 nodelay;

    listen 443 ssl;
    http2 on; # æ–°å¢è¿™è¡Œæ¥å¯ç”¨HTTP/2
    server_name api.lychees.com;
    
    # ä¿®æ”¹ä¸ºä½ çš„è¯ä¹¦ç›®å½•
    ssl_certificate /root/ssl/nginx/lychees.com_bundle.crt;
    ssl_certificate_key /root/ssl/nginx/lychees.com.key;

    ssl_session_cache shared:SSL:1m;
    ssl_session_timeout 5m;

    ssl_ciphers HIGH:!aNULL:!MD5;
    ssl_prefer_server_ciphers on;


    location / {
        proxy_pass http://127.0.0.0:8081/;
        proxy_set_header Host $host:$server_port;
        proxy_set_header X-Forwarded-For $remote_addr; # HTTPçš„è¯·æ±‚ç«¯çœŸå®çš„IP
        # proxy_set_header X-Forwarded-Proto $scheme; # ä¸ºäº†æ­£ç¡®åœ°è¯†åˆ«å®é™…ç”¨æˆ·å‘å‡ºçš„åè®®æ˜¯ http è¿˜æ˜¯ https
    }
}
```





## ä½¿ç”¨æ–¹å¼

1. å®‰è£…å¹¶å¯ç”¨ redis mongodb postgresql ï¼Œè¯·è‡ªè¡ŒæŸ¥çœ‹å®˜æ–¹æ–‡æ¡£å®‰è£…
2. ä¿®æ”¹ `config.yaml`ï¼Œè§ [config.yaml](config.yaml)
3. ä¿®æ”¹ Nginx è®¾ç½®æ–‡ä»¶
4. å¯ç”¨ç¨‹åº (systemd/nohup)

#### systemd

```
vim /etc/systemd/system/lychees-server.service
```

- åˆ›å»ºæ–‡ä»¶ `/etc/systemd/system/lychees-server.service` (å¯ä»¥è‡ªé€‰åå­—)
- è¯·æ›¿æ¢ä¸ºæ­£ç¡®çš„è·¯å¾„

```
[Unit]
Description=lychees-server
After=network.target

[Service]
Type=simple
Restart=always
WorkingDirectory=/root/lychees-server/
ExecStart=/root/lychees-server/lychees-server

[Install]
WantedBy=multi-user.target
```



- åˆ·æ–°åå°ç¨‹åº `systemctl daemon-reload`
- å¯ç”¨åå°ç¨‹åº `systemctl enable lychees-server.service`
- ç¦ç”¨åå°ç¨‹åº `systemctl disable lychees-server.service`
- å¯åŠ¨åå°ç¨‹åº `systemctl start lychees-server.service`
- åœæ­¢åå°ç¨‹åº `systemctl stop lychees-server.service`
- æ£€æŸ¥åå°ç¨‹åºçŠ¶æ€ `systemctl status lychees-server.service`

#### nohup

- ç¨‹åºè·¯å¾„æ‰§è¡Œ `nohup ./lychees-server &`
- åœæ­¢ç¨‹åº `kill -9 1234`ï¼Œ1234 æ›¿æ¢ç¨‹åºä¸º PID

# å‰ç«¯é¡µé¢

## lychees-web-account 

[å‰å¾€æŸ¥çœ‹å®ä¾‹é¡µé¢](https://account.redli.cn/)

æ³¨å†Œè´¦å·é¡µé¢ï¼ŒåŒ…å«é‡ç½®å¯†ç ï¼Œä¿®æ”¹é‚®ç®±

ä¸»è¦æ˜¯ react + shadcn è¯·æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£

```shell
# å®‰è£…ä¾èµ–
pnpm i
# å¼€å‘æ¨¡å¼è¿è¡Œ
pnpm run dev
# æ‰“åŒ…
pnpm run build
```



## lychees-web

[å‰å¾€æŸ¥çœ‹å®ä¾‹é¡µé¢](https://redli.cn/)

ä¹¦ç­¾ä¸»é¡µé¢

ä¸»è¦æ˜¯ vue + elementPlus è¯·æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£

```shell
# å®‰è£…ä¾èµ–
pnpm i
# å¼€å‘æ¨¡å¼è¿è¡Œ
pnpm run dev
# æ‰“åŒ…
pnpm run build
```

